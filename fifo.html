<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FIFO</title>
  <!-- <link rel="stylesheet" href="mainstyle.css"> -->
  <style>
    body {
        background-color: black;
        font-family: Arial, Helvetica, sans-serif;
        text-align: center;
        color: white;
        margin: 0;
        padding: 0;
        height: 100vh; /* Set height to allow scrolling */
        overflow-y: auto; /* Enable vertical scrolling */
      }
      
      .container {
        background-color: #353333;
        width: 90%;
        margin: 20px auto; /* Add margin so the content doesn’t touch the sides */
        border-radius: 10px;
        padding: 20px;
        position: relative;
        z-index: 1;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5); /* Subtle outer shadow */
      
        border-radius: 10px;
        border: 5px solid transparent;
        background-clip: padding-box;
        animation: borderAnimation 4s ease-in-out infinite; /* Animation for border */
      }
      
      .content-container {
        width: 100%;
        /* background-color: #004d8f; */
      }
      
      .title {
        background-color: #232325;
        width: 98%;
        margin: 0 auto;
        border-radius: 15px;
        padding: 10px;
        box-shadow: 
          inset 4px 4px 8px rgba(0, 0, 0, 0.6), /* Dark shadow for depth */
          inset -4px -4px 8px rgba(255, 255, 255, 0.2); /* Light shadow for highlight */
      
        border: 5px solid transparent;
        background-clip: padding-box;
        animation: borderAnimation 4s ease-in-out infinite; 
      }
      
      @keyframes borderAnimation {
        0% {
          border-color: rgba(255, 111, 97, 0.5); /* Slightly transparent */
          box-shadow: 0 0 30px rgba(255, 111, 97, 0.8);
        }
        50% {
          border-color: rgba(106, 27, 154, 0.5);
          box-shadow: 0 0 30px rgba(106, 27, 154, 0.8);
        }
        100% {
          border-color: rgba(0, 68, 204, 0.5);
          box-shadow: 0 0 30px rgba(0, 68, 204, 0.8);
        }
      }
      
      
      h1 {
        margin: 0;
        font-size: 32px;
      }
      
      h1.up {
        color: #F9F9F9;
      }
      
      h1.down {
        color: #00C8FF;
      }
      
      .button-container {
        padding: 20px 0;
        display: flex;
        justify-content: center;
        gap: 10px;
      }
      
      .button {
        padding: 10px 30px;
        border-radius: 5px;
        border: none;
        background-color: #007BFF;
        color: white;
        cursor: pointer;
        text-transform: capitalize;
        font-weight: bold;
      }
      
      .button:hover {
        background-color: #004d8f;
        color: white;
      }
      
      button#addRow {
        background-color: #4CAF50;
      }
      
      button#addRow:hover {
        background-color: #45a049;
      }
      
      .button.reset {
        background-color: #DC3545;
      }
      
      .button.reset:hover {
        background-color: #a71d2a;
      }
      
      table {
        width: 95%;
        border-collapse: collapse;
        margin-top: 20px;
        margin-bottom: 20px;
        margin: 0 auto;
      }
      
      th, td {
        border: 2px solid white;
        text-align: center;
        padding: 10px;
      }
      
      th {
        background-color: #232325;
      }
      
      td {
        color: white;
      }
      
      input[type="number"] {
        width: 80px;
        padding: 5px;
        border: 1px solid white;
        border-radius: 4px;
        background-color: #232325;
        color: white;
        text-align: center;
      }
      
      p {
        font-size: 16px;
        margin: 5px 0;
        color: white;
      }
      
      .formulas-container {
        width: 90% auto;
        display: flex;
        flex-direction: row; 
        justify-content: space-between;
        align-items: stretch;
        gap: 20px;
        padding: 20px;
      }
      
      .section {
        flex: 1;
        max-width: 400px;
        padding: 15px;
        border: 1px solid #ccc;
        border-radius: 5px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      }
      
      .formula {
        margin-top: 10px;
        font-size: 1rem;
        color: #333;
        color: white;
      }
      
      .highlight {
        font-weight: bold;
        border: 1px solid #004d8f;
        padding: 5px;
      }
      
      @media (max-width: 768px) {
        table {
          width: 100%;
          font-size: 12px; /* Smaller font size */
        }
      
        th, td {
          padding: 6px; /* Reduced padding for smaller screens */
          font-size: 12px; /* Smaller font size */
        }
      
        h1 {
          font-size: 22px; /* Reduced title font size for small screens */
        }
      
        .button-container {
          gap: 5px; /* Adjust button gap on smaller screens */
        }
      }
  </style>
</head>
<body>
  <div class="container">
    <div class="title">
      <h1 class="up">Non-Preemptive</h1>
      <h1 class="down">First In First Out</h1>
    </div>

    <div class="content-container">
      <div class="button-container">
        <button id="addRow" class="button add">Add Process</button>
        <button id="calculate" class="button">Calculate</button>
        <button id="resetTable" class="button reset">Reset</button>
      </div>

      <table id="dataTable">
        <thead>
          <tr>
            <th>Process ID</th>
            <th>Arrival Time (AT)</th>
            <th>Burst Time (BT)</th>
            <th>End Time (ET)</th>
            <th>Turnaround Time (TT)</th>
            <th>Waiting Time (WT)</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>1</td>
            <td><input type="number" class="arrivalTime" placeholder="AT" min="0" /></td>
            <td><input type="number" class="burstTime" placeholder="BT" min="0" /></td>
            <td class="endTime">-</td>
            <td class="turnaroundTime">-</td>
            <td class="waitingTime">-</td>
          </tr>
        </tbody>
      </table>
      <div class="gantt chart">
        <h2>Gantt Chart</h2>
      </div>
      <div class="formulas-container">
        <div class="section">
          <p class="tooltip">CPU Utilization</p>
          <p id="cpuUtilizationFormula" class="formula">
            (<span id="cpuBusy">Sum (BT)</span> / <span id="totalTime">Total End Time</span>) × 100 = <span id="cpuUtilizationResult" class="highlight">0%</span>
          </p>
        </div>
    
        <div class="section">
          <p class="tooltip">Average Turnaround Time</p>
          <p id="attFormula" class="formula">
            <span id="totalTurnaroundTime">Total TT</span> / <span id="totalProcessesTT">Process</span> = <span id="attResult" class="highlight">0</span>
          </p>
        </div>
    
        <div class="section">
          <p class="tooltip">Average Waiting Time</p>
          <p id="awtFormula" class="formula">
            <span id="totalWaitingTime">Total WT</span> / <span id="totalProcessesWT">Process</span> = <span id="awtResult" class="highlight">0</span>
          </p>
        </div>
    </div>
  </div>

  <script>
    const addRowButton = document.getElementById('addRow');
      const calculateButton = document.getElementById('calculate');
      const resetTableButton = document.getElementById('resetTable');
    //   const algorithmSelect = document.getElementById('algorithmType');
      const dataTable = document.getElementById('dataTable').querySelector('tbody');

      let processCounter = 2;
      // Add a new row
      addRowButton.addEventListener('click', () => {
          const row = document.createElement('tr');
          row.innerHTML = `
          <td>${processCounter}</td>
          <td><input type="number" class="arrivalTime" placeholder="AT" min="0"></td>
          <td><input type="number" class="burstTime" placeholder="BT" min="0"></td>
          <td class="endTime">-</td>
          <td class="turnaroundTime">-</td>
          <td class="waitingTime">-</td>
          `;
          dataTable.appendChild(row);
          processCounter++;
      });


      // Reset the table
      resetTableButton.addEventListener('click', () => {
          const rows = dataTable.querySelectorAll('tr');
          rows.forEach((row, index) => {
              if (index !== 0) {  // Skip the first row (which is the default with process 1)
                  row.remove();   // Remove all dynamic rows
              }
          });

          processCounter = 2;

          // Reset first row
          const firstRowCells = rows[0].querySelectorAll('td');
          firstRowCells[1].innerHTML = '<input type="number" class="arrivalTime" placeholder="AT" min="0">';
          firstRowCells[2].innerHTML = '<input type="number" class="burstTime" placeholder="BT" min="0">';
          ["3", "4", "5"].forEach(i => (firstRowCells[i].textContent = "-"));

          // Hide result headers and columns
          document.querySelectorAll('.result-header').forEach(header => header.classList.add('hidden'));
          document.querySelectorAll('.result').forEach(cell => cell.classList.add('hidden'));

          // Reset CPU, AWT, ATT values to default
          document.getElementById("totalTurnaroundTime").textContent = "Total TT";
          document.getElementById("totalProcessesTT").textContent = "Processes";
          document.getElementById("attResult").textContent = " 0";

          document.getElementById("totalWaitingTime").textContent = "Total WT";
          document.getElementById("totalProcessesWT").textContent = "processes";
          document.getElementById("awtResult").textContent = " 0";

          document.getElementById("cpuBusy").textContent = "Sum (BT)";
          document.getElementById("totalTime").textContent = "Total End Time";
          document.getElementById("cpuUtilizationResult").textContent = " 0%";
      });


      // Calculate CPU scheduling
calculateButton.addEventListener('click', () => {
    const rows = Array.from(dataTable.querySelectorAll('tr'));
    const processes = rows.map((row, index) => ({
        processIndex: index, // Track the original index for sorting later
        process: row.cells[0].textContent.trim(),
        arrivalTime: parseFloat(row.cells[1].querySelector('input').value.trim()),
        burstTime: parseFloat(row.cells[2].querySelector('input').value.trim()),
        endTime: 0,
        turnAroundTime: 0,
        waitingTime: 0,
    })).filter(p => p.process && !isNaN(p.arrivalTime) && !isNaN(p.burstTime));

    if (processes.length === 0) {
        alert('Please enter valid process data!');
        return;
    }

    let totalTurnaroundTime = 0;
    let totalWaitingTime = 0;
    let cpuBusyTime = 0;
    let totalTime = 0;

    processes.sort((a, b) => a.arrivalTime - b.arrivalTime); // Sort by arrival time
    let currentTime = 0;
    processes.forEach(process => {
        process.endTime = Math.max(currentTime, process.arrivalTime) + process.burstTime;
        process.turnAroundTime = process.endTime - process.arrivalTime;
        process.waitingTime = process.turnAroundTime - process.burstTime;
        currentTime = process.endTime;

        // Accumulate total times
        totalTurnaroundTime += process.turnAroundTime;
        totalWaitingTime += process.waitingTime;

        // Calculate CPU busy time (if needed for utilization)
        cpuBusyTime += process.burstTime;
        totalTime = Math.max(totalTime, process.endTime); // Update total time
    });

    // Sort back by original process index to maintain the correct row order
    processes.sort((a, b) => a.processIndex - b.processIndex);

    // Display results in the table
    rows.forEach((row, index) => {
        if (index < processes.length) {
            row.cells[3].textContent = processes[index].endTime;
            row.cells[4].textContent = processes[index].turnAroundTime;
            row.cells[5].textContent = processes[index].waitingTime;
        }
    });

    // Calculate and display final results
    const totalProcesses = processes.length;
    const averageTurnaroundTime = (totalTurnaroundTime / totalProcesses).toFixed(2);
    const averageWaitingTime = (totalWaitingTime / totalProcesses).toFixed(2);
    const cpuUtilization = ((cpuBusyTime / totalTime) * 100).toFixed(2);

    // Update the result elements in the DOM
    document.getElementById("totalTurnaroundTime").textContent = totalTurnaroundTime;
    document.getElementById("totalProcessesTT").textContent = totalProcesses;
    document.getElementById("attResult").textContent = averageTurnaroundTime;

    document.getElementById("totalWaitingTime").textContent = totalWaitingTime;
    document.getElementById("totalProcessesWT").textContent = totalProcesses;
    document.getElementById("awtResult").textContent = averageWaitingTime;

    document.getElementById("cpuBusy").textContent = cpuBusyTime;
    document.getElementById("totalTime").textContent = totalTime;
    document.getElementById("cpuUtilizationResult").textContent = `${cpuUtilization}%`;
});


  </script>
</body>
</html>